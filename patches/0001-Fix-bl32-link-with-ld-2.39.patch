From 38dc0032da3f112fd748d0fe076339a11c130fd8 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Vincent=20Stehl=C3=A9?= <vincent.stehle@arm.com>
Date: Tue, 25 Oct 2022 18:57:31 +0200
Subject: [PATCH] Fix bl32 link with ld 2.39
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This fixes the following link-time warning, which gets treated as fatal:

aarch64-linux-gnu-ld.bfd: warning: build/imx8mm/release/bl31/bl31.elf has a LOAD segment with RWX permissions

Signed-off-by: Vincent Stehl√© <vincent.stehle@arm.com>
---
 Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Makefile b/Makefile
index 0f045e541..f5fa3c53f 100644
--- a/Makefile
+++ b/Makefile
@@ -436,7 +436,7 @@ TF_LDFLAGS		+=	$(subst --,-Xlinker --,$(TF_LDFLAGS_$(ARCH)))
 
 # LD = gcc-ld (ld) or llvm-ld (ld.lld) or other
 else
-TF_LDFLAGS		+=	--fatal-warnings -O1
+TF_LDFLAGS		+=	-O1
 TF_LDFLAGS		+=	--gc-sections
 # ld.lld doesn't recognize the errata flags,
 # therefore don't add those in that case
-- 
2.35.1

